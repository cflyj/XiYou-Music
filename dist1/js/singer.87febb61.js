(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["singer"],{"0c70":function(t,e,c){},"10bc":function(t,e,c){"use strict";c("0c70")},"20d0":function(t,e,c){"use strict";c.r(e);var n=c("7a23");const r={class:"singer"};function l(t,e,c,l,o,s){const a=Object(n["H"])("IndexList"),i=Object(n["H"])("router-view"),u=Object(n["I"])("loading");return Object(n["S"])((Object(n["z"])(),Object(n["j"])("div",r,[Object(n["l"])(a,{data:o.singers,onSelect:s.selectSinger},null,8,["data","onSelect"]),Object(n["l"])(i,null,{default:Object(n["R"])(({Component:t})=>[Object(n["l"])(n["d"],{appear:"",name:"slide"},{default:Object(n["R"])(()=>[(Object(n["z"])(),Object(n["h"])(Object(n["J"])(t),{data:o.selectedSinger},null,8,["data"]))]),_:2},1024)]),_:1})])),[[u,!o.singers.length]])}c("14d9");var o=c("ae58");const s={ref:"groupRef"},a={class:"title"},i=["onClick"],u={class:"avatar"},b={class:"name"},j={class:"fixed-title"},d=["data-index"];function O(t,e,c,r,l,o){const O=Object(n["H"])("scroll"),f=Object(n["I"])("lazy");return Object(n["z"])(),Object(n["h"])(O,{class:"index-list","probe-type":3,onScroll:r.onScroll,ref:"scrollRef"},{default:Object(n["R"])(()=>[Object(n["k"])("ul",s,[(Object(n["z"])(!0),Object(n["j"])(n["a"],null,Object(n["F"])(c.data,t=>(Object(n["z"])(),Object(n["j"])("li",{key:t.title,class:"group"},[Object(n["k"])("h2",a,Object(n["M"])(t.title),1),Object(n["k"])("ul",null,[(Object(n["z"])(!0),Object(n["j"])(n["a"],null,Object(n["F"])(t.list,t=>(Object(n["z"])(),Object(n["j"])("li",{key:t.id,class:"item",onClick:e=>r.onItemClick(t)},[Object(n["S"])(Object(n["k"])("img",u,null,512),[[f,t.pic]]),Object(n["k"])("span",b,Object(n["M"])(t.name),1)],8,i))),128))])]))),128))],512),Object(n["S"])(Object(n["k"])("div",{class:"fixed",style:Object(n["u"])(r.fixedStyle)},[Object(n["k"])("div",j,Object(n["M"])(r.fixedTitle),1)],4),[[n["P"],r.fixedTitle]]),Object(n["k"])("div",{class:"shortcut",onTouchstart:e[0]||(e[0]=Object(n["T"])((...t)=>r.onShortcutTouchStart&&r.onShortcutTouchStart(...t),["stop","prevent"])),onTouchmove:e[1]||(e[1]=Object(n["T"])((...t)=>r.onShortcutTouchMove&&r.onShortcutTouchMove(...t),["stop","prevent"])),onTouchend:e[2]||(e[2]=Object(n["T"])(()=>{},["stop","prevent"]))},[Object(n["k"])("ul",null,[(Object(n["z"])(!0),Object(n["j"])(n["a"],null,Object(n["F"])(r.shortcutList,(t,e)=>(Object(n["z"])(),Object(n["j"])("li",{key:t,"data-index":e,class:Object(n["t"])(["item",{current:r.currentIndex===e}])},Object(n["M"])(t),11,d))),128))])],32)]),_:1},8,["onScroll"])}var f=c("70d8");function h(t){const e=30,c=Object(n["E"])(null),r=Object(n["E"])([]),l=Object(n["E"])(0),o=Object(n["E"])(0),s=Object(n["E"])(0),a=Object(n["f"])(()=>{if(l.value<0)return"";const e=t.data[o.value];return e?e.title:""}),i=Object(n["f"])(()=>{const t=s.value,c=t>0&&t<e?t-e:0;return{transform:`translate3d(0,${c}px,0)`}});function u(){const t=c.value.children,e=r.value;let n=0;e.length=0,e.push(n);for(let c=0;c<t.length;c++)n+=t[c].clientHeight,e.push(n)}function b(t){l.value=-t.y}return Object(n["Q"])(()=>t.data,async()=>{await Object(n["s"])(),u()}),Object(n["Q"])(l,t=>{const e=r.value;for(let c=0;c<e.length-1;c++){const n=e[c],r=e[c+1];t>=n&&t<=r&&(o.value=c,s.value=r-t)}}),{groupRef:c,onScroll:b,fixedTitle:a,fixedStyle:i,currentIndex:o}}function p(t,e){const c=18,r=Object(n["E"])(null),l=Object(n["f"])(()=>t.data.map(t=>t.title)),o={};function s(t){const e=parseInt(t.target.dataset.index);o.y1=t.touches[0].pageY,o.anchorIndex=e,i(e)}function a(t){o.y2=t.touches[0].pageY;const e=(o.y2-o.y1)/c|0,n=o.anchorIndex+e;i(n)}function i(t){if(isNaN(t))return;t=Math.max(0,Math.min(l.value.length-1,t));const c=e.value.children[t],n=r.value.scroll;n.scrollToElement(c,0)}return{shortcutList:l,scrollRef:r,onShortcutTouchStart:s,onShortcutTouchMove:a}}var S={name:"index-list",emits:["select"],components:{Scroll:f["a"]},props:{data:{type:Array,default(){return[]}}},setup(t,{emit:e}){const{groupRef:c,onScroll:n,fixedTitle:r,fixedStyle:l,currentIndex:o}=h(t),{shortcutList:s,scrollRef:a,onShortcutTouchStart:i,onShortcutTouchMove:u}=p(t,c);function b(t){e("select",t)}return{onItemClick:b,groupRef:c,onScroll:n,fixedTitle:r,fixedStyle:l,currentIndex:o,shortcutList:s,scrollRef:a,onShortcutTouchStart:i,onShortcutTouchMove:u}}},v=(c("7c93"),c("6b0d")),g=c.n(v);const m=g()(S,[["render",O],["__scopeId","data-v-21c259d1"]]);var x=m,T=c("335a"),y=c("aaef"),k={name:"singer",components:{IndexList:x},data(){return{singers:[],selectedSinger:null}},async created(){const t=await Object(o["b"])();this.singers=t.singers},methods:{selectSinger(t){this.selectedSinger=t,this.cacheSinger(t),this.$router.push({path:"/singer/"+t.mid})},cacheSinger(t){T["a"].session.set(y["f"],t)}}};c("10bc");const I=g()(k,[["render",l],["__scopeId","data-v-2a0224e4"]]);e["default"]=I},4488:function(t,e,c){},"70d8":function(t,e,c){"use strict";var n=c("7a23"),r=c("bba4"),l=c("5502");e["a"]={name:"wrap-scroll",props:r["a"].props,emits:r["a"].emits,render(t){return Object(n["p"])(r["a"],Object(n["r"])({ref:"scrollRef"},t.$props,{onScroll:e=>{t.$emit("scroll",e)}}),{default:Object(n["R"])(()=>[Object(n["G"])(t.$slots,"default")])})},setup(){const t=Object(n["E"])(null),e=Object(n["f"])(()=>t.value.scroll),c=Object(l["e"])(),r=Object(n["f"])(()=>c.state.playlist);return Object(n["Q"])(r,async()=>{await Object(n["s"])(),e.value.refresh()}),{scrollRef:t,scroll:e}}}},"7c93":function(t,e,c){"use strict";c("4488")},ae58:function(t,e,c){"use strict";c.d(e,"b",(function(){return r})),c.d(e,"a",(function(){return l}));var n=c("58ff");function r(){return Object(n["a"])("/api/getSingerList")}function l(t){return Object(n["a"])("/api/getSingerDetail",{mid:t.mid})}}}]);