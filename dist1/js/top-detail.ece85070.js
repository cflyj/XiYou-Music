(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["top-detail"],{3524:function(t,e,s){"use strict";s.d(e,"a",(function(){return w}));s("14d9");var a=s("7a23");const n=t=>(Object(a["C"])("data-v-82dfaffe"),t=t(),Object(a["A"])(),t),c={class:"music-list"},l=n(()=>Object(a["k"])("i",{class:"icon-back"},null,-1)),i=[l],o={class:"title"},r=n(()=>Object(a["k"])("i",{class:"icon-play"},null,-1)),u=n(()=>Object(a["k"])("span",{class:"text"},"随机播放全部",-1)),d=[r,u],b={class:"song-list-wrapper"};function p(t,e,s,n,l,r){const u=Object(a["H"])("SongList"),p=Object(a["H"])("scroll"),g=Object(a["I"])("loading"),h=Object(a["I"])("no-result");return Object(a["z"])(),Object(a["j"])("div",c,[Object(a["k"])("div",{class:"back",onClick:e[0]||(e[0]=(...t)=>r.goBack&&r.goBack(...t))},i),Object(a["k"])("h1",o,Object(a["M"])(s.title),1),Object(a["k"])("div",{class:"bg-image",style:Object(a["u"])(r.bgImageStyle),ref:"bgImage"},[Object(a["k"])("div",{class:"play-btn-wrapper",style:Object(a["u"])(r.playBtnStyle)},[Object(a["S"])(Object(a["k"])("div",{class:"play-btn",onClick:e[1]||(e[1]=(...t)=>r.random&&r.random(...t))},d,512),[[a["P"],s.songs.length>0]])],4),Object(a["k"])("div",{class:"filter",style:Object(a["u"])(r.filterStyle)},null,4)],4),Object(a["S"])((Object(a["z"])(),Object(a["h"])(p,{class:"list",style:Object(a["u"])(r.scrollStyle),"probe-type":3,onScroll:r.onScroll},{default:Object(a["R"])(()=>[Object(a["k"])("div",b,[Object(a["l"])(u,{songs:s.songs,onSelect:r.selectItem,rank:s.rank},null,8,["songs","onSelect","rank"])])]),_:1},8,["style","onScroll"])),[[g,s.loading],[h,r.noResult,s.noResultText]])])}var g=s("a25b"),h=s("70d8"),f=(s("3e8f"),s("5502"));const j=40;var O={name:"MusicList",components:{SongList:g["a"],Scroll:h["a"]},props:{songs:{type:Array,default(){return[]}},title:String,pic:String,loading:Boolean,noResultText:{type:String,default:"抱歉，没有找到合适的歌曲"},rank:Boolean},data(){return{imageHeight:0,scrollY:0,maxTranslateY:0}},computed:{playBtnStyle(){let t="";return this.scrollY>=this.maxTranslateY&&(t="none"),{display:t}},noResult(){return!this.loading&&!this.songs.length},bgImageStyle(){const t=this.scrollY;let e=0,s="70%",a=0,n=0;t>this.maxTranslateY&&(e=10,s=0,a=j+"px",n=1);let c=1;return t<0&&(c=1+Math.abs(t/this.imageHeight)),{height:a,paddingTop:s,zIndex:e,backgroundImage:`url(${this.pic})`,transform:`scale(${c})translateZ(${n}px)`}},scrollStyle(){const t=this.playlist.length?"50px":"0px";return{top:this.imageHeight+"px",bottom:t}},filterStyle(){let t=0;const e=this.scrollY,s=this.imageHeight;return e>=0&&(t=20*Math.min(this.maxTranslateY/s,e/s)),{backdropFilter:`blur(${t}px)`}},...Object(f["d"])(["playlist"])},mounted(){this.imageHeight=this.$refs.bgImage.clientHeight,this.maxTranslateY=this.imageHeight-j},methods:{goBack(){this.$router.back()},onScroll(t){this.scrollY=-t.y},selectItem({song:t,index:e}){this.selectPlay({list:this.songs,index:e})},random(){this.randomPlay(this.songs)},...Object(f["c"])(["selectPlay","randomPlay"])}},m=(s("988e"),s("6b0d")),y=s.n(m);const k=y()(O,[["render",p],["__scopeId","data-v-82dfaffe"]]);var S=k,v=s("335a"),x=s("4240");function w(t,e,s){return{name:t,components:{MusicList:S},props:{data:Object},data(){return{songs:[],loading:!0}},computed:{computedData(){let t=null;const s=this.data;if(s)t=s;else{const s=v["a"].session.get(e);s&&(s.mid||s.id+"")===this.$route.params.id&&(t=s)}return t},pic(){const t=this.computedData;return t&&t.pic},title(){const t=this.computedData;return t&&(t.name||t.title)}},async created(){const t=this.computedData;if(!t){const t=this.$route.matched[0].path;return void this.$router.push({path:t})}const e=await s(t);this.songs=await Object(x["b"])(e.songs),this.loading=!1}}}},"3e8f":function(t,e){},"70d8":function(t,e,s){"use strict";var a=s("7a23"),n=s("bba4"),c=s("5502");e["a"]={name:"wrap-scroll",props:n["a"].props,emits:n["a"].emits,render(t){return Object(a["p"])(n["a"],Object(a["r"])({ref:"scrollRef"},t.$props,{onScroll:e=>{t.$emit("scroll",e)}}),{default:Object(a["R"])(()=>[Object(a["G"])(t.$slots,"default")])})},setup(){const t=Object(a["E"])(null),e=Object(a["f"])(()=>t.value.scroll),s=Object(c["e"])(),n=Object(a["f"])(()=>s.state.playlist);return Object(a["Q"])(n,async()=>{await Object(a["s"])(),e.value.refresh()}),{scrollRef:t,scroll:e}}}},"988e":function(t,e,s){"use strict";s("aeb7")},"9d88":function(t,e,s){"use strict";s.r(e);var a=s("7a23");const n={class:"singer-detail"};function c(t,e,s,c,l,i){const o=Object(a["H"])("music-list");return Object(a["z"])(),Object(a["j"])("div",n,[Object(a["l"])(o,{songs:t.songs,title:t.title,pic:t.pic,loading:t.loading,rank:""},null,8,["songs","title","pic","loading"])])}var l=s("3524"),i=s("f7d2"),o=s("aaef"),r=Object(l["a"])("top-detail",o["g"],i["a"]),u=(s("e04a"),s("6b0d")),d=s.n(u);const b=d()(r,[["render",c],["__scopeId","data-v-262caba4"]]);e["default"]=b},a3fb:function(t,e,s){},aeb7:function(t,e,s){},e04a:function(t,e,s){"use strict";s("a3fb")},f7d2:function(t,e,s){"use strict";s.d(e,"b",(function(){return n})),s.d(e,"a",(function(){return c}));var a=s("58ff");function n(){return Object(a["a"])("/api/getTopList")}function c(t){return Object(a["a"])("/api/getTopDetail",{id:t.id,period:t.period})}}}]);